'use strict';const path=require("path"),fs=require("fs"),{promisify}=require("util"),{resolve}=require("path"),readdir=promisify(fs.readdir),stat=promisify(fs.stat);let{COPYFILE_EXCL}=fs.constants;class Files{constructor(a,b,c="",d="",e=[],f=0,g=[],h=1,i=0,j=[],k=0){this.db=a,this.selector=b,this.from=c,this.to=d,this.preset="start",this.activeFiles=[],this.remember=e,this.count=f,this.files=g,this.readSubfolders=h,this.activeFiles=i,this.activeList=j,this.countRender=k,this.typeFiles=[{img:`<img src="${path.join(__dirname,"../../public/img/png/html.png")}" />`,type:[".html",".htm",".htb",".htx",".htg"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/js.png")}" />`,type:[".js",".jsx",".cjs"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/java.png")}" />`,type:[".java",".jar"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/python.png")}" />`,type:[".py"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/cpp.png")}" />`,type:[".cpp",".bsc",".cur",".dbp"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/c.png")}" />`,type:[".c",".h"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/csharp.png")}" />`,type:[".cs"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/swift.png")}" />`,type:[".swift"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/svg.png")}" />`,type:[".svg"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/php.png")}" />`,type:[".php"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/ejs.png")}" />`,type:[".ejs"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/bash.png")}" />`,type:[".sh",".cmd"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/json.png")}" />`,type:[".json"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/graphql.png")}" />`,type:[".graphql",".agq"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/css.png")}" />`,type:[".css"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/sass.png")}" />`,type:[".sass",".scss"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/ts.png")}" />`,type:[".ts",".tsx"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/word.png")}" />`,type:[".docx",".doc",".docm",".dot",".rtf"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/pdf.png")}" />`,type:[".pdf"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/powerpoint.png")}" />`,type:[".pptx",".pptm",".ppt"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/access.png")}" />`,type:[".accdb",".mdb",".dat",".sdf",".mdf"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/database.png")}" />`,type:[".sql",".db",".sqlite",".sqlite3",".crypt"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/excel.png")}" />`,type:[".xls",".xlsx",".xlsm",".xlsb",".xlsx"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/archive.png")}" />`,type:[".zip",".7z",".cab",".tar",".deb",".ace",".pak",".rar"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/picture.png")}" />`,type:[".png",".jpeg",".jpg",".ico",".pict",".gif",".bmp",".jfif",".webm",".tif"]},{img:`<img src="${path.join(__dirname,"../../public/img/png/audio.png")}" />`,type:[".mp3",".mp4",".m4a",".wav",".wma",".aif",".ac3",".mov",".avi",".amr"]}]}mb_strwidth(a){let b=0,d=a.length,e="",f=0;for(;b<d;b++)e=a.charCodeAt(b),0<=e&&25>=e?f+=0:32<=e&&8191>=e?f+=1:8192<=e&&65376>=e?f+=2:65377<=e&&65439>=e?f+=1:65440<=e&&(f+=2);return f}mb_strimwidth(a,b,d,e){"undefined"==typeof e&&(e="");let f=this.mb_strwidth(e),g=b,c=a.length,h=0,j="";for(;g<c;g++){let b=a.charCodeAt(g),i=a.charAt(g),c=this.mb_strwidth(i),k=a.charAt(g+1),l=this.mb_strwidth(k);if(h+=c,j+=i,h+f+l>d){j+=e;break}}return j}createNotice(a,b=0){const c=document.createElement("div");c.className="alert__block",c.id=`alert-${b}`,c.innerHTML=`
            <i class="fa-light fa-bell-on"></i>
            <span>${a}</span>
        `;let d=document.querySelector("#notice__wrapper");d.prepend(c),setTimeout(()=>{c.remove()},3e3)}async readFiles(a=""){let b=this.getConfig(),c=b.typeFiles.replace(/\s/g,"").split(/,|-/);try{let d=await readdir(a);const e=await Promise.all(d.map(async d=>{const e=resolve(a,d),f=await stat(e);return f.isDirectory()&&1===this.readSubfolders?this.readFiles(e):!((""===b.typeFiles.replace(/\s/g,"")||c.includes(path.extname(e).toLowerCase()))&&(""===b.wordLeft.replace(/\s/g,"")||d.replace(/\.[^.]+$/,"").startsWith(b.wordLeft))&&(""===b.wordRight.replace(/\s/g,"")||d.replace(/\.[^.]+$/,"").endsWith(b.wordRight))&&(!(0<b.sizeFiles)||!(f.size/1e3>b.sizeFiles)))||""===d.replace(/\.[^.]+$/,"").replace(/\s/g,"")||""===path.extname(e).replace(/\s/g,"")||(this.count+=1,{id:this.count,path:e,name:d,uri:d.replace(/\.[^.]+$/,""),size:f.size,type:path.extname(e),changed:f.ctime,active:0,stats:f})}));return 0<this.count&&(document.querySelector(".gload div").innerHTML=`Прочитано файлов ${this.count}`),e.reduce((b,a)=>b.concat(a),[])}catch(a){return"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u0434\u0438\u0440\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u044F"}}trashFiles(a){let b=[],c=a.length,d=a.length;document.querySelector(".gdelete__from-pop").style.display="flex",document.querySelector(".gdelete__from-container").style.display="block",a.forEach(async a=>{await new Promise(()=>{fs.unlink(a.path+"",e=>e?(b.push(a.name),c--,b.length===d&&(alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0431\u044B\u043B\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u044B"),document.querySelector(".gdelete__from-pop").style.display="none",document.querySelector(".gdelete__from-container").style.display="none"),!1):void(c--,document.querySelector(`.file__ctx-${a.id}`)?.remove(),document.querySelector(".gdelete div").innerHTML=`Осталось файлов ${c}`,0===c&&(document.querySelector(".gdelete__from-pop").style.display="none",document.querySelector(".gdelete__from-container").style.display="none",setTimeout(()=>{this.createNotice("\u0424\u0430\u0439\u043B\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u044B")},100))))})})}copyFiles(a){let b=[],c=a.length,d=a.length;document.querySelector(".gcopy__from-pop").style.display="flex",document.querySelector(".gcopy__from-container").style.display="block",a.forEach(async a=>{await new Promise(()=>{fs.copyFile(a.path+"",`${this.to}\\${a.name}`+"",COPYFILE_EXCL,e=>e?(b.push(a.name),c--,b.length===d&&(alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0431\u044B\u043B\u0438 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B"),document.querySelector(".gcopy__from-pop").style.display="none",document.querySelector(".gcopy__from-container").style.display="none"),!1):void(c--,document.querySelector(".gcopy div").innerHTML=`Осталось файлов ${c}`,0===c&&(document.querySelector(".gcopy__from-pop").style.display="none",document.querySelector(".gcopy__from-container").style.display="none",setTimeout(()=>{this.createNotice("\u0424\u0430\u0439\u043B\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B")},100))))})})}renameFiles(a){let b=[],c=a.length,d=a.length;document.querySelector(".gtrasf__from-pop").style.display="flex",document.querySelector(".gtrasf__from-container").style.display="block",a.forEach(async a=>{await new Promise(()=>{fs.rename(a.path+"",`${this.to}\\${a.name}`+"",e=>e?(b.push(a.name),c--,b.length===d&&(alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0431\u044B\u043B\u0438 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u044B"),document.querySelector(".gtrasf__from-pop").style.display="none",document.querySelector(".gtrasf__from-container").style.display="none"),!1):void(c--,document.querySelector(`.file__ctx-${a.id}`)?.remove(),document.querySelector(".gtrasf div").innerHTML=`Осталось файлов ${c}`,0===c&&(document.querySelector(".gtrasf__from-pop").style.display="none",document.querySelector(".gtrasf__from-container").style.display="none",setTimeout(()=>{this.createNotice("\u0424\u0430\u0439\u043B\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u044B")},100))))})})}getConfig(){for(let a in this.db){let b=Object.keys(this.db[a])[0]+"";for(let c in this.db[a])if(b===this.preset)return this.db[a][c]}}renderFiles(a,b,c=1){try{let a=this.getConfig(),d=a.typeFiles.replace(/\s/g,"").split(/,|-/);b.active=this.remember.includes(b.uri)&&1===c?1:0;let e=new Date(b.changed).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",timezone:"UTC"}),f=0;f=100>=b.size/100?`${this.mb_strimwidth((b.size/100).toFixed(0)+"",0,15,"...")} КБ`:1e3>=b.size/1e3?`${this.mb_strimwidth((b.size/1e3).toFixed(0)+"",0,15,"...")} КБ`:`${this.mb_strimwidth((b.size/1e3/1e3).toFixed(2)+"",0,15,"...")} МБ`;let g=b.type.toLowerCase(),h=`<img src="${path.join(__dirname,"../../public/img/png/file.png")}" />`;if(this.typeFiles.forEach(a=>{a.type.includes(g)&&(h=a.img)}),this.countRender+=1,document.querySelector(".search__result").innerHTML=`Найдено ${this.countRender} файлов`,1===b.active){let a=`
                <label class="file__table-ctx file__ctx-${b.id}" for="file__${b.id}" 
                data-id="${b.id}"
                data-name="${b.name}"
                data-path="${b.path}"
                >
                <div class="file__table-temp">
                        <div class="container">
                            <div class="sort__check"> 
                                <div class="checkbox__wrap">
                                    <input type="checkbox" class="files checkbox__files custom-checkbox" name="file__${b.id}" id="file__${b.id}" value="${b.id}
                                    data-id="${b.id}"
                                    data-path="${b.path}"
                                    data-name="${b.name}"
                                    data-type="${b.type}"
                                    data-size="${b.size}"
                                    data-psize="${f}"
                                    data-time="${b.changed}"
                                    data-ptime="${e}"
                                    ${1===b.active?"checked":""}
                                    />
                                    <label class="checkbox__label" for="file__${b.id}"></label>
                                </div>
                            </div>
                            <span class="sort__name">
                                ${h}
                                ${this.mb_strimwidth(b.name,0,40,"...")}
                            </span>
                            <span class="sort__size">${f}</span>
                            <span class="sort__type">${this.mb_strimwidth(b.type,0,10,"...")}</span>
                            <span class="sort__time">${e}</span>
                            <span class="sort__more"></span>
                        </div>
                    </div>
                </label>
                `;return this.activeFiles=1,this.activeList.push({id:b.id,name:b.name,path:b.path}),{html:a,active:1}}else{let a=`
                <label class="file__table-ctx file__ctx-${b.id}" for="file__${b.id}" 
                data-id="${b.id}"
                data-name="${b.name}"
                data-path="${b.path}"
                >
                  
                    <div class="file__table-temp">
                        <div class="container">
                        
                             <div class="sort__check"> 
                                <div class="checkbox__wrap">
                                    <input type="checkbox" class="files checkbox__files custom-checkbox" name="file__${b.id}" id="file__${b.id}" value="${b.id}
                                    data-id="${b.id}"
                                    data-path="${b.path}"
                                    data-name="${b.name}"
                                    data-type="${b.type}"
                                    data-size="${b.size}"
                                    data-psize="${f}"
                                    data-time="${b.changed}"
                                    data-ptime="${e}"
                                    />
                                    <label class="checkbox__label" for="file__${b.id}"></label>
                                </div>
                            </div>
                       
                            <span class="sort__name">
                                ${h}
                                ${this.mb_strimwidth(b.name,0,40,"...")}
                            </span>
                            <span class="sort__size">${f}</span>
                            <span class="sort__type">${this.mb_strimwidth(b.type,0,10,"...")}</span>
                            <span class="sort__time">${e}</span>
                            <span class="sort__more"></span>
                        </div>
                    </div>
                </label>
            `;return{html:a,active:0}}}catch(a){}}getRenderFiles(){let a=document.querySelector(this.selector),b=[];return a.querySelectorAll("input").forEach(a=>{let c=a.dataset;b.push({id:c.id,path:c.path,name:c.name,type:c.type,size:c.size,psize:c.psize,time:c.time,ptime:c.ptime})}),b}async searchFiles(a,b,c){this.countRender=0,this.activeFiles=0,this.activeList=[];let d=this.files,e=this.files.length,f=0,g=document.querySelector(this.selector);if(g.innerHTML="",1<=b&&4>=b&&1<=c&&2>=c){let a=document.querySelector(".sort__name"),e=document.querySelector(".sort__size"),f=document.querySelector(".sort__type"),g=document.querySelector(".sort__time");document.querySelectorAll(".sort__item").forEach(a=>{a.classList.remove("sort__active"),a.parentNode.querySelector(".sort__arrow")&&a.parentNode.querySelector(".sort__arrow").remove()}),1===b&&1===c?(d.sort((a,b)=>a.name>b.name?1:-1),a.classList.add("sort__active"),a.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):1===b&&2===c?(d.sort((a,b)=>a.name<b.name?1:-1),a.classList.add("sort__active"),a.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):2===b&&1===c?(d.sort((a,b)=>a.size>b.size?1:-1),e.classList.add("sort__active"),e.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):2===b&&2===c?(d.sort((a,b)=>a.size<b.size?1:-1),e.classList.add("sort__active"),e.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):3===b&&1===c?(d.sort((a,b)=>a.type>b.type?1:-1),f.classList.add("sort__active"),f.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):3===b&&2===c?(d.sort((a,b)=>a.type<b.type?1:-1),f.classList.add("sort__active"),f.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):4===b&&1===c?(d.sort((a,b)=>a.changed>b.changed?1:-1),g.classList.add("sort__active"),g.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):4==b&&2==c&&(d.sort((a,b)=>a.changed<b.changed?1:-1),g.classList.add("sort__active"),g.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>")}this.activeFiles=[],await Promise.all(d.map(async b=>-1!==b.name.toLowerCase().search(a.toLowerCase())&&(this.activeFiles.push(b),f++,this.renderFiles(g,b,0)))).then(a=>g.innerHTML=a.reduce((b,a)=>b.concat(a),[]).map(a=>a.html).join("")),document.querySelector(".search__result").innerHTML=`Найдено ${this.activeFiles.length} файлов по запросу ${a}`}async sortFiles(a,b){this.countRender=0,this.activeFiles=0,this.activeList=[];let c=this.files,d=this.files.length,f=document.querySelector(this.selector);if(f.innerHTML="",0<this.activeFiles.length&&(c=this.activeFiles),1<=a&&4>=a&&1<=b&&2>=b){let d=document.querySelector(".sort__name"),e=document.querySelector(".sort__size"),f=document.querySelector(".sort__type"),g=document.querySelector(".sort__time");document.querySelectorAll(".sort__item").forEach(a=>{a.classList.remove("sort__active"),a.parentNode.querySelector(".sort__arrow")&&a.parentNode.querySelector(".sort__arrow").remove()}),1===a&&1===b?(c.sort((a,b)=>a.name>b.name?1:-1),d.classList.add("sort__active"),d.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):1===a&&2===b?(c.sort((a,b)=>a.name<b.name?1:-1),d.classList.add("sort__active"),d.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):2===a&&1===b?(c.sort((a,b)=>a.size>b.size?1:-1),e.classList.add("sort__active"),e.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):2===a&&2===b?(c.sort((a,b)=>a.size<b.size?1:-1),e.classList.add("sort__active"),e.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):3===a&&1===b?(c.sort((a,b)=>a.type>b.type?1:-1),f.classList.add("sort__active"),f.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):3===a&&2===b?(c.sort((a,b)=>a.type<b.type?1:-1),f.classList.add("sort__active"),f.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>"):4===a&&1===b?(c.sort((a,b)=>a.changed>b.changed?1:-1),g.classList.add("sort__active"),g.innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>"):4==a&&2==b&&(c.sort((a,b)=>a.changed<b.changed?1:-1),g.classList.add("sort__active"),g.innerHTML+="<i class=\"fa-solid fa-caret-up sort__arrow\"></i>")}await Promise.all(c.map(async a=>this.renderFiles(f,a,0))).then(a=>f.innerHTML=a.reduce((b,a)=>b.concat(a),[]).map(a=>a.html).join(""))}async updatePath(){this.countRender=0,document.querySelector(".gload__from-pop").style.display="flex",document.querySelector(".gload__from-container").style.display="block",this.activeFiles=0,this.activeList=[],this.count=0,await this.readFiles(this.from).then(async a=>{if(document.querySelector(".gload__from-pop").style.display="none",document.querySelector(".gload__from-container").style.display="none","object"!=typeof a){let a="";for(let b in this.db){let c=Object.keys(this.db[b])[0]+"";for(let d in this.db[b])if(c===this.getPreset()){a=this.db[b][d].name;break}}return document.querySelector("#preset__letter-name").value=a,document.querySelector(".preset__letter-pop").style.display="flex",document.querySelector(".preset__letter-container").style.display="block",!1}let b=a.filter(a=>"object"==typeof a),c=b.length;this.files=b;let d=document.querySelector(this.selector);d.innerHTML="",document.querySelectorAll(".sort__item").forEach(a=>{a.classList.remove("sort__active"),a.parentNode.querySelector(".sort__arrow")&&a.parentNode.querySelector(".sort__arrow").remove()}),document.querySelector(".global__button-danger").style.display="none",document.querySelector(".need__block > div").innerHTML="",document.querySelector(".sort__name").classList.add("sort__active"),document.querySelector(".sort__name").innerHTML+="<i class=\"fa-solid fa-caret-down sort__arrow\"></i>";let e=[],f=c;document.querySelector(".load__from-pop").style.display="flex",document.querySelector(".load__from-container").style.display="block",await Promise.all(b.map(async a=>(f--,document.querySelector(".load__block div").innerHTML=`Осталось файлов ${f}`,e.push(a.uri),0===f&&(document.querySelector(".load__from-pop").style.display="none",document.querySelector(".load__from-container").style.display="none"),this.renderFiles(d,a)))).then(a=>d.innerHTML=a.reduce((b,a)=>b.concat(a),[]).sort(a=>1===a.active?-1:1).map(a=>a.html).join(""));let g=[];this.remember.forEach(a=>{e.includes(a)||g.push(a)}),0<g.length&&(document.querySelector(".global__button-danger").style.display="block",g.forEach(a=>document.querySelector(".need__block > div").innerHTML+=`${a}; `)),1===this.activeFiles&&(document.querySelector(".search__result").innerHTML=`Выбрано ${this.activeList.length} файлов`,document.querySelector(".global__button-tran").style.display="flex")})}updateRemember(){document.querySelector(".remember__list").innerHTML="";let a=0;for(let b in this.db){let c=Object.keys(this.db[b])+"";if(c===this.preset)for(let d in this.db[b])this.remember=this.db[b][d].remember,this.db[b][d].remember.forEach(b=>{a++,document.querySelector(".remember__list").innerHTML+=`
                        <div class="remember__item remember__item-${a}">
                            <span>${b}</span>
                            <button 
                                class="remember__item-bth remember__item-bth-${a}"
                                data-preset="${c}"
                                data-id="${a}"
                                data-name="${b}"
                            ><i class="fa-regular fa-trash"></i></button>
                        </div>
                    `})}}updatePreset(){for(let a in document.querySelector(".preset__list").innerHTML="",this.db){let b=Object.keys(this.db[a])[0]+"";for(let c in this.db[a])document.querySelector(".preset__list").innerHTML+=`
                    <div class="preset__item-wrap">
                        <div class="radio__wrap preset__item">
                            <input type="radio" class="preset custom-radio" name="preset" id="${b}" value="${this.db[a][c].name}" ${b===this.preset?"checked":""}
                                    data-from="${this.db[a][c].pathFrom}"
                                    data-to="${this.db[a][c].pathTo}"
                                    data-id="${b}"
                                    data-remember="${this.db[a][c].remember}"
                                    data-db=\'${JSON.stringify(this.db[a][c])}\'
                                    />
                            <label class="radio__label" for="${b}">${this.db[a][c].name}</label>
                        </div>
                 
                        <div>
                            ${"start"===b?"":`<i class="trash__preset fa-regular fa-trash trash__preset-${b}"
                                data-id="${b}"
                            ></i>`}
                            <i class="fa-regular fa-wrench setting__preset-${b}"></i>
                           
                        </div>
                    </div>
                `}}startPreset(a="start"){this.preset=a}setPreset(a="",b="",c=""){""===a.trim()?this.preset="start":(this.preset=a,this.from=b,this.to=c,this.loadFiles())}updateDB(a){this.db=a}getActiveList(){return{active:this.activeFiles,list:this.activeList}}getPreset(){return this.preset}getCountFiles(){return this.files.length}setRemember(a){this.remember.push(a+"")}setPathTo(a){this.to=a}setPathFrom(a){this.from=a}cleanActiveList(){this.activeFiles=0,this.activeList=[]}setReadSubfolders(a){this.readSubfolders=a,console.log(this.readSubfolders)}cleanBase(){document.querySelector(this.selector).innerHTML="",document.querySelector(".remember__list").innerHTML="",document.querySelector(".preset__list").innerHTML="",document.querySelector(".check__all").removeAttribute("checked"),document.querySelector(".check__all").checked=!1,document.querySelector(".home__path").innerHTML="",document.querySelector(".home__to").innerHTML="",document.querySelector(".global__from").value="",document.querySelector(".global__to").value="",document.querySelector(".global__preset").value="",document.querySelector(".global__remember").value="",document.querySelector(".file__tbody").innerHTML=`
            <div class="loader">
                <div class="sk-circle-bounce">
                    <div class="loading-chat">
                        <svg class="spinner" viewBox="0 0 50 50">
                            <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                        </svg>
                    </div>
                </div>
            </div>`,this.db=[],this.selector="",this.from="",this.to="",this.preset="start",this.activeFiles=[],this.remember=[],this.count=0,this.files=[]}setTheme(a="dark"){document.documentElement.setAttribute("theme",a),"light"===a?document.querySelector(".setting-button").innerHTML="<i class=\"fa-regular fa-brightness\"></i>":"dark"===a&&(document.querySelector(".setting-button").innerHTML="<i class=\"fa-regular fa-moon-stars\"></i>")}async loadFiles(){this.count=0;let a="",b="",c="";for(let d in this.db)for(let e in this.db[d])c=Object.keys(this.db[d])[0]+"",c===this.preset&&(a=this.db[d][e].pathFrom,b=this.db[d][e].pathTo);this.from=a+"",this.to=b+"",document.querySelector(".home__path").innerHTML=this.from,document.querySelector(".home__to").innerHTML=this.to,document.querySelector(".global__from").value=this.from,document.querySelector(".global__to").value=this.to,document.querySelector(".global__preset").value=this.preset,document.querySelector(".global__remember").value=this.remember,this.updateRemember(),this.updatePreset(),await this.updatePath()}}module.exports=Files;